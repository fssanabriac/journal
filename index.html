<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Journal</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://kit.fontawesome.com/ddfde4b284.js" crossorigin="anonymous"></script>
</head>
<body>
    
  <header style="display: flex; justify-content: space-between">
    <h3>
      <i class="fa-solid fa-square-pen fa-2x" 
        style="color:#4E6B36;"></i>
      Journal
    </h3>
    <button id="darkModeButton" onClick="changeMode()">Dark</button>
  </header>
  <div id="container">
    <fieldset>
      <legend>New entry </legend>
      <form>
        <label for="theme">Choose a theme</label>
        <select name="theme">
          <option>Theme 1</option>
          <option>Theme 2</option>
        </select>
        <input name="entryTitle" 
               type="text" 
               placeholder="Enter new entry">
        <textarea name="entryBody" 
                  placeholder="Commentary"></textarea>
        <input type="submit" >
      </form>
    </fieldset>
  </div>

  <!-- This will expose saved entries-->
  <ul id="items">
    <li>Title <br> body</li>
  </ul>

  <script src="scripts/darkMode.js"></script>
  <script>
    // define variables. get dom elements
    const form = document.querySelector('form');
    const theme = document.querySelector("[name='theme']");
    const inputTitle = document.querySelector("[name='entryTitle']");
    const inputBody = document.querySelector("[name='entryBody']");
    const items = document.getElementById('items');

    

    // Lifecycle
    const existingItems = JSON.parse(localStorage.getItem('items')) || [];

    const itemArray =  [];

    

    // define update array function
    addItem = (theme, inputTitle, inputBody) =>{
          console.log("Pushing: ", inputTitle, inputBody);
          itemArray.push({theme: theme, title: inputTitle, body : inputBody});
          console.log(itemArray)

          const newItem = document.createElement('li');
          newItem.innerHTML = "<span>" + 
            `${inputTitle }` + "</span>" + "<br>" + 
            "<p>" + `${inputBody}` + "</p>"; 

          items.appendChild(newItem);

          localStorage.setItem('items', JSON.stringify(itemArray));
        }

    // Add existing Items to itemArray
    existingItems.forEach(item  => {
        addItem(item.theme, item.title, item.body);
        }
        );

    // add event listener for submit
    form.onsubmit = (event) =>{

          event.preventDefault();
          //console.log(form, inputTitle, inputBody);
          addItem(theme.value, inputTitle.value, inputBody.value)
        }


  </script>
</body>
</html>
